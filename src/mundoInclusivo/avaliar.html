<!DOCTYPE html>
<html lang="pt-BR">
  <head id="head-imports">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Esse site visa auxiliar pessoas com deficiência a encontrar locais acessíveis por meio da colaboração,
      permitidindo o cadastramento de estabelecimentos e suas respectivas informações referentes à acessibilidade. 
      Isso facilitará a vida das pessoas com deficiência, diminuindo o estresse e o tempo de busca, 
      além de incentivar os estabelecimentos a se tornarem mais inclusivos.">
    <title>MundoInclusivo</title>
    <link rel="stylesheet" href="css/base_style.css">
    <script src="components/base_imports.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBkLndHuMv968iinF2ol4_B33JVIf7Gf6A&callback=console.debug&libraries=maps,marker&v=beta">
    </script>
    <script>
      window.setTimeout(() => {
        const stars = document.querySelectorAll('.rating label');

        stars.forEach((star, index) => {
          star.addEventListener('click', () => {
            stars.forEach((s, i) => {
              s.classList.remove('filled');  
              if (i <= index) {
                s.classList.add('filled');
              }
            });
          });
        });

        const form = document.querySelector('form#avaliar');

        form?.addEventListener('submit', (event) => {
          event.preventDefault()
          let target = event.target
          let rating = target.querySelector('div.rating')
          let ratingTotals = rating.querySelectorAll('label.filled')?.length
          let text = target.querySelector('textarea#feedback')?.value
          let avaliador = target.querySelector('input#email')?.value

          let emailLocal = target.querySelector('input#emailLocal')?.value

          let obj = {
            "nota": ratingTotals,
            "usuário": avaliador,
            "texto": text
          }

          window.addFeedbackForStore(obj, emailLocal)
          window.location.reload()
        })
      }, 2000)
    </script>
    <link rel="stylesheet" href="css/listLocais.css">
  </head>
  <body style="min-height: 100vh; display: flex; flex-direction: column; justify-content: space-between; height: 100%;">
    <section id="navbar-component">
    </section>
    <script src="components/set-logins.js"></script>
    <script src="components/load_locais.js"></script>
    <script src="components/leitor-de-tela.js"></script>
    <script src="components/local-storage.js"></script>
    <script src="components/base.js"></script>

    <main class="sessao1" style="background-color: white;">
      <section style="background-color: white;">
        <div class="container" style="background-color: white;">
          <div class="row" style="position: relative; min-height: 700px; background-color: white;" id="localAtual">
          </div>
        </div>
      </section>
    </main>

    <section id="footer-component">
    </section>

    <script src="components/navbar.js"></script>
    <script src="components/footer.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
      integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
      crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
      integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
      crossorigin="anonymous"></script>
  </body>
</html>